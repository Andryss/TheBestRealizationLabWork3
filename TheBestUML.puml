@startuml
'Текст задания:
'
'Издательская компания «Эксмо» совместно с Hoff представила данные по
'книжным предпочтениям россиян в 2021 году: абсолютным лидером продаж
'стали книги (издание и переиздание) Михаила Лабковского «Хочу и буду»,
'сообщили в пресс-службе.
'
'Книги психолога лидировали по продажам по всей стране: за год было
'продано более 129 тыс. экземпляров первого издания и 34,5 тыс. второго.
'
'На втором месте по популярности у покупателей детектив «Внутри убийцы»
'израильского писателя Майка Омера (более 92 тыс. экземпляров) про
'криминального психолога-женщину, расследующую череду жестоких
'преступлений. Тройку лидеров продаж замыкает роман «Transhumanism inc.»
'Виктора Пелевина — новинка российского автора разошлась в количестве 71
'тыс. экземпляров.

enum Genre {
ADVENTURE("приключенческая книга")
VISUAL_NOVEL("визуальная новелла")
DETECTIVE("детектив")
DRAMA("драма")
FANTASY("фэнтези"),
SCIENCE_FICTION("научная фантастика"),
HISTORICAL("историческая книга"),
PSYCHOLOGIC("психологическая книга");
--Fields--
- final String name
--Constructors--
Genre(String name)
--Methods--
+ static getRandomGenre() : Genre
+ static getRandomGenres() : Genre[]
+ getName() : String
}


enum Country{
USSR("СССР", 1_000_000),
FRANCE("Франция", 1_000_000),
GERMANY("Германия", 1_000_000),
NORWAY("Норвегия", 1_000_000);
--Fields--
- String name
- int population
'persons-heap :)
- Person[] people
- boolean anarchyFlag
--Constructors--
Country(String name, int population)
--Methods--
'method, which invoke immigration method
+ initializationRandom() : void
- immigration() : void
+ getName(): String
+ getPopulation(): int
+ isAnarchy(): boolean
+ getPeople() : Person[]
}

interface Readable {
--Methods--
'this method will return info about readable
'so TheBestLab4.Book.read() should return String with author, title, genre, about fields
read() : String
}

'REMIND TO MAKE IT CLASS
enum Book implements Readable {
HARRYPOTTER(),
THESTAINLESSRAT();
--Fields--
- String author
- String title
- Genre genre
- int edition
- String about
--Constructors--
Book(String author, String title, Genre genre, int edition, String about)
--Methods--
+ read(): String
+ getGenre(): Genre
+ getEdition(): int
+ getAbout(): String
+ getAuthor(): String
+ getTitle(): String
}

class Person {
--Fields--
- final static String[] names;
- String name
- Genre[] favouriteGenres
--Methods--
+ static getRandomName(): String
+ static getRandomPerson() : Person
+ getName() : String
+ getFavouriteGenres(): Genre[]
+ whatYouBuy(Readable[] readable): Readable[]
+ choseBest(Readable[] readable): Readable
+ choseWorst(Readable[] readable): Readable
}

abstract class Publisher {
--Fields--
- String name
--Constructors--
Publisher(String name)
--Methods--
+ abstract publish(World world, Readable[] readables): void
+ getName(): String
}

'publisher, which invokes whatYouBuy
class PurchasingPublisher extends Publisher {
--Fields--
'it doesn't need fields
--Constructors--
TheBestPublisher(String name)
--Methods--
- survey(Country country, Readable[], readables): Map<Readable, Integer>
- printCountryResult(Country country, Readable[] readables, Map<Readable, Integer> rating): void
+ publish(World world, Readable[] readables): void
}

abstract class ChoosingPublisher extends Publisher {
--Fields--
--Constructors--
ChoosingPublisher(String name)
--Methods--
# abstract invokePersonMethod(Person person, Readable[] readables)
- survey(Country country, Readable[], readables): Map<Readable, Integer>
# abstract printCountryResult(Country country, Readable[] readables, Map<Readable, Integer> rating): void
+ publish(World world, Readable[] readables): void
}

'publisher which invokes choseBest method
class ChoosingBestPublisher extends ChoosingPublisher {
--Fields--
--Constructors--
ChoosingBestPublisher(String name)
--Methods--
# invokePersonMethod(Person person, Readable[] readables) : Readable
# printCountryResult(Country country, Readable[] readables, Map<Readable, Integer> rating) : void
}

'publisher which invokes choseWorst method
class ChoosingWorstPublisher extends ChoosingPublisher {
--Fields--
--Constructors--
ChoosingBestPublisher(String name)
--Methods--
# invokePersonMethod(Person person, Readable[] readables) : Readable
# printCountryResult(Country country, Readable[] readables, Map<Readable, Integer> rating) : void
}

class World {
--Fields--
- int year
- Country[] countries
--Constructors--
'some changes here
World(int year, Country[] countries)
--Methods--
+ getCountries() : Country[]
+ getYear() : int
}

class TooManyPeopleException extends Exception {
'there may be overpopulation in country
--Fields--
- Country country
- Person person
--Constructors--
TooManyPeopleException(Country country, Person person)
(other constructors)
--Methods--
+ getMessage() : String
}

'new exception
class CountyIsAnarchyException extends RuntimeException {
'County can't return People[] if anarchy
--Fields--
- Country country
--Constructors--
CountyIsAnarchyException(Country country)
(other constructors)
--Methods--
+ getMessage() : String
}

@enduml
